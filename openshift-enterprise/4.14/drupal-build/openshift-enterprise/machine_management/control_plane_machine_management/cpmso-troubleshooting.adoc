:_mod-docs-content-type: ASSEMBLY
[id="cpmso-troubleshooting"]
= Troubleshooting the control plane machine set
include::../includes/common-attributes.adoc[]
:context: cpmso-troubleshooting


Use the information in this section to understand and recover from issues you might encounter.

//Checking the control plane machine set custom resource status
include::../includes/cpmso-checking-status.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:cpmso-activating_cpmso-getting-started[Activating the control plane machine set custom resource]
* xref:cpmso-creating-cr_cpmso-getting-started[Creating a control plane machine set custom resource]

//Adding a missing Azure internal load balancer
include::../includes/cpmso-ts-ilb-missing.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:cpmso-yaml-provider-spec-azure_cpmso-configuration[Sample Azure provider specification]

//Recovering a degraded etcd Operator after a machine health check operation
include::../includes/cpmso-ts-mhc-etcd-degraded.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* link:https://access.redhat.com/documentation/en-us/openshift_container_platform/4.14/html-single/backup_and_restore/#dr-restoring-cluster-state[Restoring to a previous cluster state]

[id="cpmso-troubleshooting-shiftstack-upgrade_{context}"]
== Upgrading clusters that run on {rh-openstack}

For clusters that run on {rh-openstack-first} that were created with {product-title} 4.13 or earlier, you might have to perform post-upgrade tasks before you can use control plane machine sets.

// TODO: Rejigger
// Post-upgrade config for ShiftStack with machine AZs explicitly defined and rootVolumes w/out AZs
include::../includes/cpmso-openstack-ts-root-volume-azs.adoc[leveloffset=+2]

// Post-upgrade config for ShiftStack with control plane AZs explicitly defined
include::../includes/cpmso-openstack-with-az-config.adoc[leveloffset=+2]