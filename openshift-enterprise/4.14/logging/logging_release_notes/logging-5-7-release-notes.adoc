:_mod-docs-content-type: ASSEMBLY
[id="logging-5-7-release-notes"]
// The {product-title} attribute provides the context-sensitive name of the relevant OpenShift distribution, for example, "OpenShift Container Platform" or "OKD". The {product-version} attribute provides the product version relative to the distribution, for example "4.9".
// {product-title} and {product-version} are parsed when AsciiBinder queries the _distro_map.yml file in relation to the base branch of a pull request.
// See https://github.com/openshift/openshift-docs/blob/main/contributing_to_docs/doc_guidelines.adoc#product-name-and-version for more information on this topic.
// Other common attributes are defined in the following lines:
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:
:imagesdir: images
:prewrap!:
:op-system-first: Red Hat Enterprise Linux CoreOS (RHCOS)
:op-system: RHCOS
:op-system-lowercase: rhcos
:op-system-base: RHEL
:op-system-base-full: Red Hat Enterprise Linux (RHEL)
:op-system-version: 8.x
:tsb-name: Template Service Broker
:kebab: image:kebab.png[title="Options menu"]
:rh-openstack-first: Red Hat OpenStack Platform (RHOSP)
:rh-openstack: RHOSP
:ai-full: Assisted Installer
:ai-version: 2.3
:cluster-manager-first: Red Hat OpenShift Cluster Manager
:cluster-manager: OpenShift Cluster Manager
:cluster-manager-url: link:https://console.redhat.com/openshift[OpenShift Cluster Manager Hybrid Cloud Console]
:cluster-manager-url-pull: link:https://console.redhat.com/openshift/install/pull-secret[pull secret from the Red Hat OpenShift Cluster Manager]
:insights-advisor-url: link:https://console.redhat.com/openshift/insights/advisor/[Insights Advisor]
:hybrid-console: Red Hat Hybrid Cloud Console
:hybrid-console-second: Hybrid Cloud Console
:oadp-first: OpenShift API for Data Protection (OADP)
:oadp-full: OpenShift API for Data Protection
:oc-first: pass:quotes[OpenShift CLI (`oc`)]
:product-registry: OpenShift image registry
:rh-storage-first: Red Hat OpenShift Data Foundation
:rh-storage: OpenShift Data Foundation
:rh-rhacm-first: Red Hat Advanced Cluster Management (RHACM)
:rh-rhacm: RHACM
:rh-rhacm-version: 2.8
:sandboxed-containers-first: OpenShift sandboxed containers
:sandboxed-containers-operator: OpenShift sandboxed containers Operator
:sandboxed-containers-version: 1.3
:sandboxed-containers-version-z: 1.3.3
:sandboxed-containers-legacy-version: 1.3.2
:cert-manager-operator: cert-manager Operator for Red Hat OpenShift
:secondary-scheduler-operator-full: Secondary Scheduler Operator for Red Hat OpenShift
:secondary-scheduler-operator: Secondary Scheduler Operator
// Backup and restore
:velero-domain: velero.io
:velero-version: 1.11
:launch: image:app-launcher.png[title="Application Launcher"]
:mtc-short: MTC
:mtc-full: Migration Toolkit for Containers
:mtc-version: 1.8
:mtc-version-z: 1.8.0
// builds (Valid only in 4.11 and later)
:builds-v2title: Builds for Red Hat OpenShift
:builds-v2shortname: OpenShift Builds v2
:builds-v1shortname: OpenShift Builds v1
//gitops
:gitops-title: Red Hat OpenShift GitOps
:gitops-shortname: GitOps
:gitops-ver: 1.1
:rh-app-icon: image:red-hat-applications-menu-icon.jpg[title="Red Hat applications"]
//pipelines
:pipelines-title: Red Hat OpenShift Pipelines
:pipelines-shortname: OpenShift Pipelines
:pipelines-ver: pipelines-1.12
:pipelines-version-number: 1.12
:tekton-chains: Tekton Chains
:tekton-hub: Tekton Hub
:artifact-hub: Artifact Hub
:pac: Pipelines as Code
//odo
:odo-title: odo
//OpenShift Kubernetes Engine
:oke: OpenShift Kubernetes Engine
//OpenShift Platform Plus
:opp: OpenShift Platform Plus
//openshift virtualization (cnv)
:VirtProductName: OpenShift Virtualization
:VirtVersion: 4.14
:KubeVirtVersion: v0.59.0
:HCOVersion: 4.14.0
:CNVNamespace: openshift-cnv
:CNVOperatorDisplayName: OpenShift Virtualization Operator
:CNVSubscriptionSpecSource: redhat-operators
:CNVSubscriptionSpecName: kubevirt-hyperconverged
:delete: image:delete.png[title="Delete"]
//distributed tracing
:DTProductName: Red Hat OpenShift distributed tracing platform
:DTShortName: distributed tracing platform
:DTProductVersion: 2.9
:JaegerName: Red Hat OpenShift distributed tracing platform (Jaeger)
:JaegerShortName: distributed tracing platform (Jaeger)
:JaegerVersion: 1.47.0
:OTELName: Red Hat OpenShift distributed tracing data collection
:OTELShortName: distributed tracing data collection
:OTELOperator: Red Hat OpenShift distributed tracing data collection Operator
:OTELVersion: 0.81.0
:TempoName: Red Hat OpenShift distributed tracing platform (Tempo)
:TempoShortName: distributed tracing platform (Tempo)
:TempoOperator: Tempo Operator
:TempoVersion: 2.1.1
//logging
:logging-title: logging subsystem for Red Hat OpenShift
:logging-title-uc: Logging subsystem for Red Hat OpenShift
:logging: logging subsystem
:logging-uc: Logging subsystem
//serverless
:ServerlessProductName: OpenShift Serverless
:ServerlessProductShortName: Serverless
:ServerlessOperatorName: OpenShift Serverless Operator
:FunctionsProductName: OpenShift Serverless Functions
//service mesh v2
:product-dedicated: Red Hat OpenShift Dedicated
:product-rosa: Red Hat OpenShift Service on AWS
:SMProductName: Red Hat OpenShift Service Mesh
:SMProductShortName: Service Mesh
:SMProductVersion: 2.4.4
:MaistraVersion: 2.4
//Service Mesh v1
:SMProductVersion1x: 1.1.18.2
//Windows containers
:productwinc: Red Hat OpenShift support for Windows Containers
// Red Hat Quay Container Security Operator
:rhq-cso: Red Hat Quay Container Security Operator
// Red Hat Quay
:quay: Red Hat Quay
:sno: single-node OpenShift
:sno-caps: Single-node OpenShift
//TALO and Redfish events Operators
:cgu-operator-first: Topology Aware Lifecycle Manager (TALM)
:cgu-operator-full: Topology Aware Lifecycle Manager
:cgu-operator: TALM
:redfish-operator: Bare Metal Event Relay
//Formerly known as CodeReady Containers and CodeReady Workspaces
:openshift-local-productname: Red Hat OpenShift Local
:openshift-dev-spaces-productname: Red Hat OpenShift Dev Spaces
// Factory-precaching-cli tool
:factory-prestaging-tool: factory-precaching-cli tool
:factory-prestaging-tool-caps: Factory-precaching-cli tool
:openshift-networking: Red Hat OpenShift Networking
// TODO - this probably needs to be different for OKD
//ifdef::openshift-origin[]
//:openshift-networking: OKD Networking
//endif::[]
// logical volume manager storage
:lvms-first: Logical volume manager storage (LVM Storage)
:lvms: LVM Storage
//Operator SDK version
:osdk_ver: 1.31.0
//Operator SDK version that shipped with the previous OCP 4.x release
:osdk_ver_n1: 1.28.0
//Next-gen (OCP 4.14+) Operator Lifecycle Manager, aka "v1"
:olmv1: OLM 1.0
:olmv1-first: Operator Lifecycle Manager (OLM) 1.0
:ztp-first: GitOps Zero Touch Provisioning (ZTP)
:ztp: GitOps ZTP
:3no: three-node OpenShift
:3no-caps: Three-node OpenShift
:run-once-operator: Run Once Duration Override Operator
// Web terminal
:web-terminal-op: Web Terminal Operator
:devworkspace-op: DevWorkspace Operator
:secrets-store-driver: Secrets Store CSI driver
:secrets-store-operator: Secrets Store CSI Driver Operator
//AWS STS
:sts-first: Security Token Service (STS)
:sts-full: Security Token Service
:sts-short: STS
//Cloud provider names
//AWS
:aws-first: Amazon Web Services (AWS)
:aws-full: Amazon Web Services
:aws-short: AWS
//GCP
:gcp-first: Google Cloud Platform (GCP)
:gcp-full: Google Cloud Platform
:gcp-short: GCP
//alibaba cloud
:alibaba: Alibaba Cloud
// IBM Cloud VPC
:ibmcloudVPCProductName: IBM Cloud VPC
:ibmcloudVPCRegProductName: IBM(R) Cloud VPC
// IBM Cloud
:ibm-cloud-bm: IBM Cloud Bare Metal (Classic)
:ibm-cloud-bm-reg: IBM Cloud(R) Bare Metal (Classic)
// IBM Power
:ibmpowerProductName: IBM Power
:ibmpowerRegProductName: IBM(R) Power
// IBM zSystems
:ibmzProductName: IBM Z
:ibmzRegProductName: IBM(R) Z
:linuxoneProductName: IBM(R) LinuxONE
//Azure
:azure-full: Microsoft Azure
:azure-short: Azure
//vSphere
:vmw-full: VMware vSphere
:vmw-short: vSphere
//Oracle
:oci-first: Oracle(R) Cloud Infrastructure
:oci: OCI
:ocvs-first: Oracle(R) Cloud VMware Solution (OCVS)
:ocvs: OCVS
= Logging 5.7
:context: logging-5-7-release-notes

toc::[]

// Text snippet included in the following assemblies:
//
// logging/cluster-logging-support.adoc
// logging/logging_release_notes/logging-5-7-release-notes.adoc
// logging/logging_release_notes/logging-5-8-release-notes.adoc
//
// Text snippet included in the following modules:
//
// logging-deploy-RHOL-console.adoc

:_mod-docs-content-type: SNIPPET

[NOTE]
====
Logging is provided as an installable component, with a distinct release cycle from the core {product-title}. The link:https://access.redhat.com/support/policy/updates/openshift_operators#platform-agnostic[Red Hat OpenShift Container Platform Life Cycle Policy] outlines release compatibility.
====

// Text snippet included in the following assemblies:
//
// logging/logging_release_notes/logging-5-7-release-notes.adoc
// logging/logging_release_notes/logging-5-8-release-notes.adoc
//
// Text snippet included in the following modules:
//
//
:_mod-docs-content-type: SNIPPET

[NOTE]
====
The `stable` channel only provides updates to the most recent release of logging. To continue receiving updates for prior releases, you must change your subscription channel to `stable-X` where `X` is the version of logging you have installed.
====

:leveloffset: +1

// Module included in the following assemblies:
// cluster-logging-release-notes.adoc
// logging-5-7-release-notes.adoc
:_mod-docs-content-type: REFERENCE
[id="cluster-logging-release-notes-5-7-7_{context}"]
= Logging 5.7.7
This release includes link:https://access.redhat.com/errata/RHSA-2023:5530[OpenShift Logging Bug Fix Release 5.7.7].

[id="openshift-logging-5-7-7-bug-fixes_{context}"]
== Bug fixes
* Before this update, FluentD normalized the logs emitted by the EventRouter differently from Vector. With this update, the Vector produces log records in a consistent format. (link:https://issues.redhat.com/browse/LOG-4178[LOG-4178])

* Before this update, there was an error in the query used for the *FluentD Buffer Availability* graph in the metrics dashboard created by the Cluster Logging Operator as it showed the minimum buffer usage. With this update, the graph shows the maximum buffer usage and is now renamed to *FluentD Buffer Usage*. (link:https://issues.redhat.com/browse/LOG-4555[LOG-4555])

* Before this update, deploying a LokiStack on IPv6-only or dual-stack {product-title} clusters caused the LokiStack memberlist registration to fail. As a result, the distributor pods went into a crash loop. With this update, an administrator can enable IPv6 by setting the `lokistack.spec.hashRing.memberlist.enableIPv6:` value to `true`, which resolves the issue. (link:https://issues.redhat.com/browse/LOG-4569[LOG-4569])

* Before this update, the log collector relied on the default configuration settings for reading the container log lines. As a result, the log collector did not read the rotated files efficiently. With this update, there is an increase in the number of bytes read, which allows the log collector to efficiently process rotated files. (link:https://issues.redhat.com/browse/LOG-4575[LOG-4575])

* Before this update, the unused metrics in the Event Router caused the container to fail due to excessive memory usage. With this update, there is reduction in the memory usage of the Event Router by removing the unused metrics. (link:https://issues.redhat.com/browse/LOG-4686[LOG-4686])

[id="openshift-logging-5-7-7-CVEs_{context}"]
== CVEs
* link:https://access.redhat.com/security/cve/CVE-2023-0800[CVE-2023-0800]
* link:https://access.redhat.com/security/cve/CVE-2023-0801[CVE-2023-0801]
* link:https://access.redhat.com/security/cve/CVE-2023-0802[CVE-2023-0802]
* link:https://access.redhat.com/security/cve/CVE-2023-0803[CVE-2023-0803]
* link:https://access.redhat.com/security/cve/CVE-2023-0804[CVE-2023-0804]
* link:https://access.redhat.com/security/cve/CVE-2023-2002[CVE-2023-2002]
* link:https://access.redhat.com/security/cve/CVE-2023-3090[CVE-2023-3090]
* link:https://access.redhat.com/security/cve/CVE-2023-3390[CVE-2023-3390]
* link:https://access.redhat.com/security/cve/CVE-2023-3776[CVE-2023-3776]
* link:https://access.redhat.com/security/cve/CVE-2023-4004[CVE-2023-4004]
* link:https://access.redhat.com/security/cve/CVE-2023-4527[CVE-2023-4527]
* link:https://access.redhat.com/security/cve/CVE-2023-4806[CVE-2023-4806]
* link:https://access.redhat.com/security/cve/CVE-2023-4813[CVE-2023-4813]
* link:https://access.redhat.com/security/cve/CVE-2023-4863[CVE-2023-4863]
* link:https://access.redhat.com/security/cve/CVE-2023-4911[CVE-2023-4911]
* link:https://access.redhat.com/security/cve/CVE-2023-5129[CVE-2023-5129]
* link:https://access.redhat.com/security/cve/CVE-2023-20593[CVE-2023-20593]
* link:https://access.redhat.com/security/cve/CVE-2023-29491[CVE-2023-29491]
* link:https://access.redhat.com/security/cve/CVE-2023-30630[CVE-2023-30630]
* link:https://access.redhat.com/security/cve/CVE-2023-35001[CVE-2023-35001]
* link:https://access.redhat.com/security/cve/CVE-2023-35788[CVE-2023-35788]

:leveloffset!:

:leveloffset: +1

// Module included in the following assemblies:
// cluster-logging-release-notes.adoc
// logging-5-7-release-notes.adoc
:_mod-docs-content-type: REFERENCE
[id="cluster-logging-release-notes-5-7-6_{context}"]
= Logging 5.7.6
This release includes link:https://access.redhat.com/errata/RHSA-2023:4933[OpenShift Logging Bug Fix Release 5.7.6].

[id="openshift-logging-5-7-6-bug-fixes_{context}"]
== Bug fixes
* Before this update, the collector relied on the default configuration settings for reading the container log lines. As a result, the collector did not read the rotated files efficiently. With this update, there is an increase in the number of bytes read, which allows the collector to efficiently process rotated files. (link:https://issues.redhat.com/browse/LOG-4501[LOG-4501])

* Before this update, when users pasted a URL with predefined filters, some filters did not reflect. With this update, the UI reflects all the filters in the URL. (link:https://issues.redhat.com/browse/LOG-4459[LOG-4459])

* Before this update, forwarding to Loki using custom labels generated an error when switching from Fluentd to Vector. With this update, the Vector configuration sanitizes labels in the same way as Fluentd to ensure the collector starts and correctly processes labels. (link:https://issues.redhat.com/browse/LOG-4460[LOG-4460])

* Before this update, the Observability Logs console search field did not accept special characters that it should escape. With this update, it is escaping special characters properly in the query. (link:https://issues.redhat.com/browse/LOG-4456[LOG-4456])

* Before this update, the following warning message appeared while sending logs to Splunk: `Timestamp was not found.` With this update, the change overrides the name of the log field used to retrieve the Timestamp and sends it to Splunk without warning. (link:https://issues.redhat.com/browse/LOG-4413[LOG-4413])

* Before this update, the CPU and memory usage of Vector was increasing over time. With this update, the Vector configuration now contains the `expire_metrics_secs=60` setting to limit the lifetime of the metrics and cap the associated CPU usage and memory footprint. (link:https://issues.redhat.com/browse/LOG-4171[LOG-4171])

* Before this update, the LokiStack gateway cached authorized requests very broadly. As a result, this caused wrong authorization results. With this update, LokiStack gateway caches on a more fine-grained basis which resolves this issue. (link:https://issues.redhat.com/browse/LOG-4393[LOG-4393])

* Before this update, the Fluentd runtime image included builder tools which were unnecessary at runtime. With this update, the builder tools are removed, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4467[LOG-4467])

[id="openshift-logging-5-7-6-CVEs_{context}"]
== CVEs
* link:https://access.redhat.com/security/cve/CVE-2023-3899[CVE-2023-3899]
* link:https://access.redhat.com/security/cve/CVE-2023-4456[CVE-2023-4456]
* link:https://access.redhat.com/security/cve/CVE-2023-32360[CVE-2023-32360]
* link:https://access.redhat.com/security/cve/CVE-2023-34969[CVE-2023-34969]

:leveloffset!:

// No release notes for 5.7.5 since this was a CVE only releases. In the future, add a link to the CVE.

:leveloffset: +1

// Module included in the following assemblies:
// cluster-logging-release-notes.adoc
// logging-5-7-release-notes.adoc
:_mod-docs-content-type: REFERENCE
[id="cluster-logging-release-notes-5-7-4_{context}"]
= Logging 5.7.4
This release includes link:https://access.redhat.com/errata/RHSA-2023:4341[OpenShift Logging Bug Fix Release 5.7.4].

[id="openshift-logging-5-7-4-bug-fixes_{context}"]
== Bug fixes
* Before this update, when forwarding logs to CloudWatch, a `namespaceUUID` value was not appended to the `logGroupName` field. With this update, the `namespaceUUID` value is included, so a `logGroupName` in CloudWatch appears as `logGroupName: vectorcw.b443fb9e-bd4c-4b6a-b9d3-c0097f9ed286`. (link:https://issues.redhat.com/browse/LOG-2701[LOG-2701])

* Before this update, when forwarding logs over HTTP to an off-cluster destination, the Vector collector was unable to authenticate to the cluster-wide HTTP proxy even though correct credentials were provided in the proxy URL. With this update, the Vector log collector can now authenticate to the cluster-wide HTTP proxy. (link:https://issues.redhat.com/browse/LOG-3381[LOG-3381])

* Before this update, the Operator would fail if the Fluentd collector was configured with Splunk as an output, due to this configuration being unsupported. With this update, configuration validation rejects unsupported outputs, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4237[LOG-4237])

* Before this update, when the Vector collector was updated an `enabled = true` value in the TLS configuration for AWS Cloudwatch logs and the GCP Stackdriver caused a configuration error. With this update, `enabled = true` value will be removed for these outputs, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4242[LOG-4242])

* Before this update, the Vector collector occasionally panicked with the following error message in its log:
`thread 'vector-worker' panicked at 'all branches are disabled and there is no else branch', src/kubernetes/reflector.rs:26:9`. With this update, the error has been resolved. (link:https://issues.redhat.com/browse/LOG-4275[LOG-4275])

* Before this update, an issue in the Loki Operator caused the `alert-manager` configuration for the application tenant to disappear if the Operator was configured with additional options for that tenant. With this update, the generated Loki configuration now contains both the custom and the auto-generated configuration. (link:https://issues.redhat.com/browse/LOG-4361[LOG-4361])

* Before this update, when multiple roles were used to authenticate using STS with AWS Cloudwatch forwarding, a recent update caused the credentials to be non-unique. With this update, multiple combinations of STS roles and static credentials can once again be used to authenticate with AWS Cloudwatch. (link:https://issues.redhat.com/browse/LOG-4368[LOG-4368])

* Before this update, Loki filtered label values for active streams but did not remove duplicates, making Grafana's Label Browser unusable. With this update, Loki filters out duplicate label values for active streams, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4389[LOG-4389])

// Release notes text field empty. * (link:https://issues.redhat.com/browse/LOG-4302[LOG-4302])
// Release notes text field empty. * (link:https://issues.redhat.com/browse/LOG-4015[LOG-4015])
// Release notes text field empty. * (link:https://issues.redhat.com/browse/LOG-4120[LOG-4120])
// Release notes text field empty. * (link:https://issues.redhat.com/browse/LOG-4372[LOG-4372])


[id="openshift-logging-5-7-4-CVEs_{context}"]
== CVEs
* link:https://access.redhat.com/security/cve/CVE-2022-25883[CVE-2022-25883]
* link:https://access.redhat.com/security/cve/CVE-2023-22796[CVE-2023-22796]

:leveloffset!:

:leveloffset: +1

// Module included in the following assemblies:
// cluster-logging-release-notes.adoc
:_mod-docs-content-type: REFERENCE
[id="cluster-logging-release-notes-5-7-3_{context}"]
= Logging 5.7.3
This release includes link:https://access.redhat.com/errata/RHSA-2023:3998[OpenShift Logging Bug Fix Release 5.7.3].

[id="openshift-logging-5-7-3-bug-fixes_{context}"]
== Bug fixes
* Before this update, when viewing logs within the {product-title} web console, cached files caused the data to not refresh. With this update the bootstrap files are not cached, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4100[LOG-4100])

* Before this update, the Loki Operator reset errors in a way that made identifying configuration problems difficult to troubleshoot. With this update, errors persist until the configuration error is resolved. (link:https://issues.redhat.com/browse/LOG-4156[LOG-4156])

* Before this update, the LokiStack ruler did not restart after changes were made to the `RulerConfig` custom resource (CR). With this update, the Loki Operator restarts the ruler pods after the `RulerConfig` CR is updated. (link:https://issues.redhat.com/browse/LOG-4161[LOG-4161])

* Before this update, the vector collector terminated unexpectedly when input match label values contained a `/` character within the `ClusterLogForwarder`. This update resolves the issue by quoting the match label, enabling the collector to start and collect logs. (link:https://issues.redhat.com/browse/LOG-4176[LOG-4176])

* Before this update, the Loki Operator terminated unexpectedly when a `LokiStack` CR defined tenant limits, but not global limits. With this update, the Loki Operator can process `LokiStack` CRs without global limits, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4198[LOG-4198])

* Before this update, Fluentd did not send logs to an Elasticsearch cluster when the private key provided was passphrase-protected. With this update, Fluentd properly handles passphrase-protected private keys when establishing a connection with Elasticsearch. (link:https://issues.redhat.com/browse/LOG-4258[LOG-4258])

* Before this update, clusters with more than 8,000 namespaces caused Elasticsearch to reject queries because the list of namespaces was larger than the `http.max_header_size` setting. With this update, the default value for header size has been increased, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4277[LOG-4277])

* Before this update, label values containing a `/` character within the `ClusterLogForwarder` CR would cause the collector to terminate unexpectedly.
With this update, slashes are replaced with underscores, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4095[LOG-4095])

* Before this update, the Cluster Logging Operator terminated unexpectedly when set to an unmanaged state. With this update, a check to ensure that the `ClusterLogging` resource is in the correct Management state before initiating the reconciliation of the `ClusterLogForwarder` CR, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4177[LOG-4177])

* Before this update, when viewing logs within the {product-title} web console, selecting a time range by dragging over the histogram didn't work on the aggregated logs view inside the pod detail. With this update, the time range can be selected by dragging on the histogram in this view. (link:https://issues.redhat.com/browse/LOG-4108[LOG-4108])

* Before this update, when viewing logs within the {product-title} web console, queries longer than 30 seconds timed out. With this update, the timeout value can be configured in the configmap/logging-view-plugin. (link:https://issues.redhat.com/browse/LOG-3498[LOG-3498])

* Before this update, when viewing logs within the {product-title} web console, clicking the *more data available* option loaded more log entries only the first time it was clicked. With this update, more entries are loaded with each click. (link:https://issues.redhat.com/browse/OU-188[OU-188])

* Before this update, when viewing logs within the {product-title} web console, clicking the *streaming* option would only display the *streaming logs* message without showing the actual logs. With this update, both the message and the log stream are displayed correctly. (link:https://issues.redhat.com/browse/OU-166[OU-166])

[id="openshift-logging-5-7-3-CVEs_{context}"]
== CVEs
* link:https://access.redhat.com/security/cve/CVE-2020-24736[CVE-2020-24736]
* link:https://access.redhat.com/security/cve/CVE-2022-48281[CVE-2022-48281]
* link:https://access.redhat.com/security/cve/CVE-2023-1667[CVE-2023-1667]
* link:https://access.redhat.com/security/cve/CVE-2023-2283[CVE-2023-2283]
* link:https://access.redhat.com/security/cve/CVE-2023-24329[CVE-2023-24329]
* link:https://access.redhat.com/security/cve/CVE-2023-26115[CVE-2023-26115]
* link:https://access.redhat.com/security/cve/CVE-2023-26136[CVE-2023-26136]
* link:https://access.redhat.com/security/cve/CVE-2023-26604[CVE-2023-26604]
* link:https://access.redhat.com/security/cve/CVE-2023-28466[CVE-2023-28466]

:leveloffset!:

:leveloffset: +1

// Module included in the following assemblies:
// cluster-logging-release-notes.adoc
:_mod-docs-content-type: REFERENCE
[id="cluster-logging-release-notes-5-7-2_{context}"]
= Logging 5.7.2
This release includes link:https://access.redhat.com/errata/RHSA-2023:3495[OpenShift Logging Bug Fix Release 5.7.2].

[id="openshift-logging-5-7-2-bug-fixes_{context}"]
== Bug fixes
* Before this update, it was not possible to delete the `openshift-logging` namespace directly due to the presence of a pending finalizer. With this update, the finalizer is no longer utilized, enabling direct deletion of the namespace. (link:https://issues.redhat.com/browse/LOG-3316[LOG-3316])

* Before this update, the `run.sh` script would display an incorrect `chunk_limit_size` value if it was changed according to the {product-title} documentation. However, when setting the `chunk_limit_size` via the environment variable `$BUFFER_SIZE_LIMIT`, the script would show the correct value. With this update, the `run.sh` script now consistently displays the correct `chunk_limit_size` value in both scenarios. (link:https://issues.redhat.com/browse/LOG-3330[LOG-3330])

* Before this update, the {product-title} web console's logging view plugin did not allow for custom node placement or tolerations. This update adds the ability to define node placement and tolerations for the logging view plugin. (link:https://issues.redhat.com/browse/LOG-3749[LOG-3749])

* Before this update, the Cluster Logging Operator encountered an Unsupported Media Type exception when trying to send logs to DataDog via the Fluentd HTTP Plugin. With this update, users can seamlessly assign the content type for log forwarding by configuring the HTTP header Content-Type. The value provided is automatically assigned to the `content_type` parameter within the plugin, ensuring successful log transmission. (link:https://issues.redhat.com/browse/LOG-3784[LOG-3784])

* Before this update, when the `detectMultilineErrors` field was set to `true` in the `ClusterLogForwarder` custom resource (CR), PHP multi-line errors were recorded as separate log entries, causing the stack trace to be split across multiple messages. With this update, multi-line error detection for PHP is enabled, ensuring that the entire stack trace is included in a single log message. (link:https://issues.redhat.com/browse/LOG-3878[LOG-3878])

* Before this update, `ClusterLogForwarder` pipelines containing a space in their name caused the Vector collector pods to continuously crash. With this update, all spaces, dashes (-), and dots (.) in pipeline names are replaced with underscores (_). (link:https://issues.redhat.com/browse/LOG-3945[LOG-3945])

* Before this update, the `log_forwarder_output` metric did not include the `http` parameter. This update adds the missing parameter to the metric. (link:https://issues.redhat.com/browse/LOG-3997[LOG-3997])

* Before this update, Fluentd did not identify some multi-line JavaScript client exceptions when they ended with a colon. With this update, the Fluentd buffer name is prefixed with an underscore, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4019[LOG-4019])

* Before this update, when configuring log forwarding to write to a Kafka output topic which matched a key in the payload, logs dropped due to an error.  With this update, Fluentd's buffer name has been prefixed with an underscore, resolving the issue.(link:https://issues.redhat.com/browse/LOG-4027[LOG-4027])

* Before this update, the LokiStack gateway returned label values for namespaces without applying the access rights of a user. With this update, the LokiStack gateway applies permissions to label value requests, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4049[LOG-4049])

* Before this update, the Cluster Logging Operator API required a certificate to be provided by a secret when the `tls.insecureSkipVerify` option was set to `true`. With this update, the Cluster Logging Operator API no longer requires a certificate to be provided by a secret in such cases. The following configuration has been added to the Operator's CR:
+
[source,yaml]
----
tls.verify_certificate = false
tls.verify_hostname = false
----
+
(link:https://issues.redhat.com/browse/LOG-3445[LOG-3445])

* Before this update, the LokiStack route configuration caused queries running longer than 30 seconds to timeout. With this update, the LokiStack global and per-tenant `queryTimeout` settings affect the route timeout settings, resolving the issue. (link:https://issues.redhat.com/browse/LOG-4052[LOG-4052])

* Before this update, a prior fix to remove defaulting of the `collection.type` resulted in the Operator no longer honoring the deprecated specs for resource, node selections, and tolerations.  This update modifies the Operator behavior to always prefer the `collection.logs` spec over those of `collection`.  This varies from previous behavior that allowed using both the preferred fields and deprecated fields but would ignore the deprecated fields when `collection.type` was populated. (link:https://issues.redhat.com/browse/LOG-4185[LOG-4185])

* Before this update, the Vector log collector did not generate TLS configuration for forwarding logs to multiple Kafka brokers if the broker URLs were not specified in the output. With this update, TLS configuration is generated appropriately for multiple brokers. (link:https://issues.redhat.com/browse/LOG-4163[LOG-4163])

* Before this update, the option to enable passphrase for log forwarding to Kafka was unavailable. This limitation presented a security risk as it could potentially expose sensitive information. With this update, users now have a seamless option to enable passphrase for log forwarding to Kafka. (link:https://issues.redhat.com/browse/LOG-3314[LOG-3314])

* Before this update, Vector log collector did not honor the `tlsSecurityProfile` settings for outgoing TLS connections. After this update, Vector handles TLS connection settings appropriately. (link:https://issues.redhat.com/browse/LOG-4011[LOG-4011])

* Before this update, not all available output types were included in the `log_forwarder_output_info` metrics. With this update, metrics contain Splunk and Google Cloud Logging data which was missing previously. (link:https://issues.redhat.com/browse/LOG-4098[LOG-4098])

* Before this update, when `follow_inodes` was set to `true`, the Fluentd collector could crash on file rotation. With this update, the `follow_inodes` setting does not crash the collector. (link:https://issues.redhat.com/browse/LOG-4151[LOG-4151])

* Before this update, the Fluentd collector could incorrectly close files that should be watched because of how those files were tracked. With this update, the tracking parameters have been corrected.  (link:https://issues.redhat.com/browse/LOG-4149[LOG-4149])

* Before this update, forwarding logs with the Vector collector and naming a pipeline in the `ClusterLogForwarder` instance `audit`, `application` or `infrastructure` resulted in collector pods staying in the `CrashLoopBackOff` state with the following error in the collector log:
+
[source,text]
----
ERROR vector::cli: Configuration error. error=redefinition of table transforms.audit for key transforms.audit
----
+
After this update, pipeline names no longer clash with reserved input names, and pipelines can be named `audit`, `application` or `infrastructure`. (link:https://issues.redhat.com/browse/LOG-4218[LOG-4218])

* Before this update, when forwarding logs to a syslog destination with the Vector collector and setting the `addLogSource` flag to `true`, the following extra empty fields were added to the forwarded messages: `namespace_name=`, `container_name=`, and `pod_name=`. With this update, these fields are no longer added to journal logs. (link:https://issues.redhat.com/browse/[LOG-4219])

* Before this update, when a `structuredTypeKey` was not found, and a `structuredTypeName` was not specified, log messages were still parsed into structured object. With this update, parsing of logs is as expected. (link:https://issues.redhat.com/browse/LOG-4220[LOG-4220])


[id="openshift-logging-5-7-2-CVEs_{context}"]
== CVEs

* link:https://access.redhat.com/security/cve/CVE-2021-26341[CVE-2021-26341]
* link:https://access.redhat.com/security/cve/CVE-2021-33655[CVE-2021-33655]
* link:https://access.redhat.com/security/cve/CVE-2021-33656[CVE-2021-33656]
* link:https://access.redhat.com/security/cve/CVE-2022-1462[CVE-2022-1462]
* link:https://access.redhat.com/security/cve/CVE-2022-1679[CVE-2022-1679]
* link:https://access.redhat.com/security/cve/CVE-2022-1789[CVE-2022-1789]
* link:https://access.redhat.com/security/cve/CVE-2022-2196[CVE-2022-2196]
* link:https://access.redhat.com/security/cve/CVE-2022-2663[CVE-2022-2663]
* link:https://access.redhat.com/security/cve/CVE-2022-3028[CVE-2022-3028]
* link:https://access.redhat.com/security/cve/CVE-2022-3239[CVE-2022-3239]
* link:https://access.redhat.com/security/cve/CVE-2022-3522[CVE-2022-3522]
* link:https://access.redhat.com/security/cve/CVE-2022-3524[CVE-2022-3524]
* link:https://access.redhat.com/security/cve/CVE-2022-3564[CVE-2022-3564]
* link:https://access.redhat.com/security/cve/CVE-2022-3566[CVE-2022-3566]
* link:https://access.redhat.com/security/cve/CVE-2022-3567[CVE-2022-3567]
* link:https://access.redhat.com/security/cve/CVE-2022-3619[CVE-2022-3619]
* link:https://access.redhat.com/security/cve/CVE-2022-3623[CVE-2022-3623]
* link:https://access.redhat.com/security/cve/CVE-2022-3625[CVE-2022-3625]
* link:https://access.redhat.com/security/cve/CVE-2022-3627[CVE-2022-3627]
* link:https://access.redhat.com/security/cve/CVE-2022-3628[CVE-2022-3628]
* link:https://access.redhat.com/security/cve/CVE-2022-3707[CVE-2022-3707]
* link:https://access.redhat.com/security/cve/CVE-2022-3970[CVE-2022-3970]
* link:https://access.redhat.com/security/cve/CVE-2022-4129[CVE-2022-4129]
* link:https://access.redhat.com/security/cve/CVE-2022-20141[CVE-2022-20141]
* link:https://access.redhat.com/security/cve/CVE-2022-25147[CVE-2022-25147]
* link:https://access.redhat.com/security/cve/CVE-2022-25265[CVE-2022-25265]
* link:https://access.redhat.com/security/cve/CVE-2022-30594[CVE-2022-30594]
* link:https://access.redhat.com/security/cve/CVE-2022-36227[CVE-2022-36227]
* link:https://access.redhat.com/security/cve/CVE-2022-39188[CVE-2022-39188]
* link:https://access.redhat.com/security/cve/CVE-2022-39189[CVE-2022-39189]
* link:https://access.redhat.com/security/cve/CVE-2022-41218[CVE-2022-41218]
* link:https://access.redhat.com/security/cve/CVE-2022-41674[CVE-2022-41674]
* link:https://access.redhat.com/security/cve/CVE-2022-42703[CVE-2022-42703]
* link:https://access.redhat.com/security/cve/CVE-2022-42720[CVE-2022-42720]
* link:https://access.redhat.com/security/cve/CVE-2022-42721[CVE-2022-42721]
* link:https://access.redhat.com/security/cve/CVE-2022-42722[CVE-2022-42722]
* link:https://access.redhat.com/security/cve/CVE-2022-43750[CVE-2022-43750]
* link:https://access.redhat.com/security/cve/CVE-2022-47929[CVE-2022-47929]
* link:https://access.redhat.com/security/cve/CVE-2023-0394[CVE-2023-0394]
* link:https://access.redhat.com/security/cve/CVE-2023-0461[CVE-2023-0461]
* link:https://access.redhat.com/security/cve/CVE-2023-1195[CVE-2023-1195]
* link:https://access.redhat.com/security/cve/CVE-2023-1582[CVE-2023-1582]
* link:https://access.redhat.com/security/cve/CVE-2023-2491[CVE-2023-2491]
* link:https://access.redhat.com/security/cve/CVE-2023-22490[CVE-2023-22490]
* link:https://access.redhat.com/security/cve/CVE-2023-23454[CVE-2023-23454]
* link:https://access.redhat.com/security/cve/CVE-2023-23946[CVE-2023-23946]
* link:https://access.redhat.com/security/cve/CVE-2023-25652[CVE-2023-25652]
* link:https://access.redhat.com/security/cve/CVE-2023-25815[CVE-2023-25815]
* link:https://access.redhat.com/security/cve/CVE-2023-27535[CVE-2023-27535]
* link:https://access.redhat.com/security/cve/CVE-2023-29007[CVE-2023-29007]

:leveloffset!:

:leveloffset: +1

// Module included in the following assemblies:
//
// logging-5-7-release-notes.adoc
// cluster-logging-release-notes.adoc
:_mod-docs-content-type: REFERENCE
[id="logging-release-notes-5-7-1_{context}"]
= Logging 5.7.1
This release includes: link:https://access.redhat.com/errata/RHBA-2023:3197[OpenShift Logging Bug Fix Release 5.7.1].

[id="logging-5-7-1-bug-fixes_{context}"]
== Bug fixes
* Before this update, the presence of numerous noisy messages within the Cluster Logging Operator pod logs caused reduced log readability, and increased difficulty in identifying important system events. With this update, the issue is resolved by significantly reducing the noisy messages within Cluster Logging Operator pod logs. (link:https://issues.redhat.com/browse/LOG-3482[LOG-3482])

* Before this update, the API server would reset the value for the `CollectorSpec.Type` field to `vector`, even when the custom resource used a different value. This update removes the default for the `CollectorSpec.Type` field to restore the previous behavior. (link:https://issues.redhat.com/browse/LOG-4086[LOG-4086])

* Before this update, a time range could not be selected in the {Product-Title} web console by clicking and dragging over the logs histogram. With this update, clicking and dragging can be used to successfully select a time range. (link:https://issues.redhat.com/browse/LOG-4501[LOG-4501])

* Before this update, clicking on the *Show Resources* link in the {Product-Title} web console did not produce any effect. With this update, the issue is resolved by fixing the functionality of the "Show Resources" link to toggle the display of resources for each log entry. (link:https://issues.redhat.com/browse/LOG-3218[LOG-3218])

[id="logging-5-7-1-CVEs_{context}"]
== CVEs
* link:https://access.redhat.com/security/cve/CVE-2023-21930[CVE-2023-21930]
* link:https://access.redhat.com/security/cve/CVE-2023-21937[CVE-2023-21937]
* link:https://access.redhat.com/security/cve/CVE-2023-21938[CVE-2023-21938]
* link:https://access.redhat.com/security/cve/CVE-2023-21939[CVE-2023-21939]
* link:https://access.redhat.com/security/cve/CVE-2023-21954[CVE-2023-21954]
* link:https://access.redhat.com/security/cve/CVE-2023-21967[CVE-2023-21967]
* link:https://access.redhat.com/security/cve/CVE-2023-21968[CVE-2023-21968]
* link:https://access.redhat.com/security/cve/CVE-2023-28617[CVE-2023-28617]

:leveloffset!:

:leveloffset: +1

//module included in logging-5-7-release-notes.adoc
:content-type: REFERENCE
[id="logging-release-notes-5-7-0{context}"]
= Logging 5.7.0
This release includes link:https://access.redhat.com/errata/RHBA-2023:2133[OpenShift Logging Bug Fix Release 5.7.0].

[id="logging-5-7-enhancements"]
== Enhancements
With this update, you can enable logging to detect multi-line exceptions and reassemble them into a single log entry.

To enable logging to detect multi-line exceptions and reassemble them into a single log entry, ensure that the `ClusterLogForwarder` Custom Resource (CR) contains a `detectMultilineErrors` field, with a value of `true`.

[id="logging-5-7-known-issues"]
== Known Issues
None.

[id="logging-5-7-0-bug-fixes"]
== Bug fixes
* Before this update, the `nodeSelector` attribute for the Gateway component of the LokiStack did not impact node scheduling. With this update, the `nodeSelector` attribute works as expected. (link:https://issues.redhat.com/browse/LOG-3713[LOG-3713])

[id="logging-5-7-0-CVEs"]
== CVEs
* link:https://access.redhat.com/security/cve/CVE-2023-1999[CVE-2023-1999]
* link:https://access.redhat.com/security/cve/CVE-2023-28617[CVE-2023-28617]

:leveloffset!:

//# includes=_attributes/common-attributes,snippets/logging-compatibility-snip,snippets/logging-stable-updates-snip,modules/logging-rn-5.7.7,modules/logging-rn-5.7.6,modules/logging-rn-5.7.4,modules/logging-rn-5.7.3,modules/logging-rn-5.7.2,modules/logging-rn-5.7.1,modules/logging-rn-5.7.0
